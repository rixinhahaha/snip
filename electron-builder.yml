appId: com.snip.app
productName: Snip
copyright: Copyright 2024
directories:
  output: dist
  buildResources: assets

mac:
  category: public.app-category.productivity
  target:
    - target: dmg
      arch:
        - arm64
  darkModeSupport: true
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: assets/entitlements.mac.plist
  entitlementsInherit: assets/entitlements.mac.plist
  notarize: true
  extendInfo:
    LSUIElement: true
    NSScreenCaptureUsageDescription: "Snip needs screen recording permission to capture screenshots."

dmg:
  title: "Snip"
  sign: false
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications

afterPack: scripts/afterPack.js

files:
  - src/**/*
  - assets/**/*
  - "!**/*.map"
  - "!**/node_modules/canvas{,/**}"
  - "!**/node_modules/sharp{,/**}"
  - "!**/node_modules/@img{,/**}"

asarUnpack:
  - "src/main/segmentation/segmentation-worker.js"
  - "src/main/animation/gif-encoder-worker.js"
  - "node_modules/@huggingface/transformers/**"
  - "node_modules/onnxruntime-node/**"
  - "node_modules/onnxruntime-common/**"
  - "node_modules/onnxruntime-web/**"
  - "node_modules/gifenc/**"
  - "node_modules/upng-js/**"
  - "node_modules/pako/**"
  - "node_modules/ffmpeg-static/**"
  - "node_modules/electron-liquid-glass/**"

extraResources:
  - from: "build/Release/window_utils.node"
    to: "native/window_utils.node"
  - from: "vendor/ollama"
    to: "ollama"
    filter:
      - "**/*"
      - "!models"
      - "!models/**"
  - from: "vendor/models"
    to: "models"

extraMetadata:
  main: src/main/main.js
